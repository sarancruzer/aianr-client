<app-sidebar (messageEvent)="receivedMessage($event)"></app-sidebar>


<section class="content zoomIn">

  <div class="container clearfix">

    <div class="txt_boby effect1">

    <div class="row">
s<!--new-->
<div class="col-md-12">
    <div class="tab" role="tabpanel">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a href="#Section1" aria-controls="home" role="tab" data-toggle="tab">Received Request</a></li>
            <li role="presentation"><a href="#Section2" aria-controls="profile" role="tab" data-toggle="tab">Sent Request</a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content tabs">
            <div role="tabpanel" class="tab-pane fade in active" id="Section1">
                <!-- table 1-->
                <div class="panel panel-default">
                    <div class="panel-heading">
                      <h3><span class="material_assignment"><i class="material-icons">assignment</i></span> Request Received List
                        </h3>
                    </div>
                    <div class="panel-body">
                        <div class="table-responsive">
                      <table class="table table-sm table-striped">
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Approver Name</th>
                            <th>Approver Email</th>
                            <th>Request Type</th>
                            <th>Created date</th>
                            <th>Modified date</th>
                            <th>Status</th>
                            <th>Actions</th>
                            <th></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of items; let i = index">
                            <td scope="row">{{i+1}} </td>
                            <td>{{item._source.reveiver_name}}</td>
                            <td>{{item._source.receiver_email}}</td>
                            <td>{{item._source.request_type}}</td>
                            <td>{{item._source.created_at | date: 'dd-MM-yyyy hh:mm'}}</td>
                            <td>{{item._source.updated_at | date: 'dd-MM-yyyy hh:mm'}}</td>
                            <td>
                              <span class="label label-warning" *ngIf='item._source.status == "PENDING"' >PENDING</span>
                              <span class="label label-success" *ngIf='item._source.status == "APPROVED"' >APPROVED</span>
                              <span class="label label-danger" *ngIf='item._source.status == "REJECTED"' >REJECTED</span>
                            </td>
                            <td>
                                <button type="button" class="btn btn-outline-success button2" data-toggle="modal" (click)="view(item._source)">
                                  <i class="fa fa-search" aria-hidden="true"></i>
                                </button>
      
                              <button type="button" class="btn btn-outline-success button2" data-toggle="modal" (click)="edit(item._source,item._id)">
                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                              </button>
                            </td>
                          </tr>
                          <tr *ngIf="items.length <= 0"> <td colspan="8"> <div style="text-align: center"> No records found </div></td></tr>
                        </tbody>
                      </table>
      
                    </div>
                   </div>
                  </div>
                <!-- table 1-->
            </div>
            <div role="tabpanel" class="tab-pane fade" id="Section2">
                <!-- table 2-->
                <div class="panel panel-default">
                    <div class="panel-heading">
                      <h3><span class="material_assignment"><i class="material-icons">assignment</i></span> Request Sent List
                        </h3>
                    </div>
                    <div class="panel-body">
                        <div class="table-responsive">
                      <table class="table table-sm table-striped">
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Approver Name</th>
                            <th>Approver Email</th>
                            <th>Request Type</th>
                            <th>Created date</th>
                            <th>Modified date</th>
                            <th>Status</th>
                            <th>Actions</th>
                            <th></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of items; let i = index">
                            <td scope="row">{{i+1}} </td>
                            <td>{{item._source.reveiver_name}}</td>
                            <td>{{item._source.receiver_email}}</td>
                            <td>{{item._source.request_type}}</td>
                            <td>{{item._source.created_at | date: 'dd-MM-yyyy hh:mm'}}</td>
                            <td>{{item._source.updated_at | date: 'dd-MM-yyyy hh:mm'}}</td>
                            <td>
                              <span class="label label-warning" *ngIf='item._source.status == "PENDING"' >PENDING</span>
                              <span class="label label-success" *ngIf='item._source.status == "APPROVED"' >APPROVED</span>
                              <span class="label label-danger" *ngIf='item._source.status == "REJECTED"' >REJECTED</span>
                            </td>
                            <td>
                              <button type="button" class="btn btn-outline-success button2" data-toggle="modal" (click)="view(item._source)">
                                  <i class="fa fa-search" aria-hidden="true"></i>
                                  </button>
                              <!-- <button type="button" class="btn btn-outline-success button2" data-toggle="modal" (click)="edit(item._source,item._id)">
                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                              </button> -->
                            </td>
                          </tr>
                          <tr *ngIf="items.length <= 0"> <td colspan="8"> <div style="text-align: center"> No records found </div></td></tr>
      
                        </tbody>
                      </table>
      
                      <!-- <pre>{{model | json}}</pre> -->
      
      
                    </div>
                   </div>
                  </div>
                <!-- table 2-->
            </div>
        </div>
    </div>
</div>
<!--new-->
    </div>
    </div>
  </div>

</section>


<div bsModal #viewModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog  modal-md" role="document">
      <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" (click)="viewModal.hide()" aria-label="Close">&times;</button>
                <h4 class="modal-title">View Details</h4>
              </div>
          <div class="modal-body">
            <div class="card-body">

              <table class="table table-responsive table-hover table-striped">
                <thead>
                  <tr>
                  <th>Labels</th>
                  <th>Values</th>
                  </tr>
                </thead>
                <tbody>

                  <tr><td>Approver Name</td> <td>{{model['approvername']}}</td></tr>
                  <tr><td>Request Type</td> <td>{{model['probabilityofleave']}}</td></tr>
                  <tr><td>Applied Reason</td> <td>{{model['appliedreason']}}</td></tr>
                  <tr><td>Approved Reason</td> <td>{{model['approvalreason']}}</td></tr>
                  <tr><td>Status</td> <td>{{model['approvedstatus']}}</td></tr>
                  <tr><td>Leave date</td> <td>{{model['leavedate']}}</td></tr>
                  <tr><td>Approved date</td> <td>{{model['approveddate']}}</td></tr>
                  <tr><td>No of days</td> <td>{{model['days']}}</td></tr>

                </tbody>
              </table>
            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="viewModal.hide()">Close</button>
          </div>
      </div>

    </div>

  </div>



<div bsModal #editModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog  modal-md" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" (click)="editModal.hide()" aria-label="Close">&times;</button>
              <h4 class="modal-title">Update Status</h4>
            </div>

            <form (ngSubmit)="update(updateForm,'sent')" #updateForm="ngForm" novalidate>
              <div class="modal-body">
                  <fieldset>
                      <!-- Form Name -->

                      <div class="form-group">
                          <label class="control-label col-sm-4" for="email">Approver Name:</label>
                          <div class="col-sm-8">
                              <input type="text" name="receiver_name" class="form-control" [(ngModel)]="model.receiver_name" />
                          </div>
                      </div>

                      <div class="form-group">
                          <label class="control-label col-sm-4" for="email">Approver Email:</label>
                          <div class="col-sm-8">
                              <input type="text" name="receiver_email" class="form-control" [(ngModel)]="model.receiver_email" />
                          </div>
                      </div>

                      <div class="form-group">
                          <label class="control-label col-sm-4" for="email">Request Type:</label>
                          <div class="col-sm-8">
                              <input type="text" name="request_type" class="form-control" [(ngModel)]="model.request_type" />
                          </div>
                      </div>


                      <div class="form-group">
                          <label class="control-label col-sm-4" for="email">Request Type:</label>
                          <div class="col-sm-8">
                              <select name="status" [(ngModel)]="model.status" >
                                <option value="APPROVED">Approved</option>
                                <option value="PENDING">Pending</option>
                                <option value="REJECTED">Rejected</option>
                                </select>
                          </div>
                      </div>


                      <div class="form-group col-md-12 col-md-offset-6">
                            <button type="submit" id="submit" name="submit" class="btn btn-primary" value="1"> Update </button>
                            <button type="button" class="btn btn-secondary" (click)="editModal.hide()"> Cancel </button>
                        </div>

                      </fieldset>

              </div>
            </form>

            <pre>{{model | json}}</pre>
      </div>

    </div>

  </div>
